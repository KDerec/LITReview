{% extends "base.html" %}

{% block title %}
<title>Mes publications</title>
{% endblock %}

{% block content %}
{% if posts_list %}
<ul id="feed">
    {% for post in posts_list %}
    {% if post.title %}
    <li class="ticket-object">
        <h1>{{ post.user }} a demandé une critique</h1>
        <p>{{ post.time_created }}</p>
        <h2>{{ post.title }}</h2>
        <p>{{ post.description }}</p>
        {% if post.image %}
        <img src="{{ post.image.url }}">
        {% endif %}
        <a href="{% url 'catalog:update-ticket' post.id %}"><button type="button">Modifier</button></a>
        <a href="{% url 'catalog:delete-ticket' post.id %}"><button type="button">Supprimer</button></a>
    </li>
    {% endif %}
    {% if post.headline %}
    <li class="review-object">
        <h1>{{ post.user }} a publié une critique.</h1>
        <p>{{ post.time_created }}</p>
        <h2>{{ post.headline }} - {{post.rating}}/5</h2>
        <p>{{ post.body }}</p>
        <ul class="ticket-object">
            <li>
                <h1>Ticket - {{ post.ticket.user }}</h1>
                <p>{{ post.ticket.time_created }}</p>
                <h2>{{ post.ticket.title }}</h2>
                {% if post.ticket.image %}
                <img src="{{ post.ticket.image.url }}">
                {% endif %}
            </li>
        </ul>
        <a href="{% url 'catalog:update-review' post.id %}"><button type="button">Modifier</button></a>
        <a href="{% url 'catalog:delete-review' post.id %}"><button type="button">Supprimer</button></a>
    </li>
    {% endif %}
    {% endfor %}
</ul>
{% else %}
<p>Il n'y a pas de ticket ni de critique.</p>
{% endif %}
{% endblock %}